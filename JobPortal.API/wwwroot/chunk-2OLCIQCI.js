import{c as G,e as j,f as B,g as S,h as b,i as H,j as Q,k as $,m as U,n as J,o as K,p as Y,q as Z}from"./chunk-Y6IDWSZT.js";import{f as X}from"./chunk-JDQVLM36.js";import{a as W}from"./chunk-BD465OXD.js";import{Aa as y,Ba as w,Da as P,Fa as u,Ga as d,Lb as z,M as g,Ma as q,Mb as V,N as m,Pb as A,Ra as i,Sa as p,Ua as I,Wa as D,ab as M,ba as r,bb as O,cb as L,fa as _,hb as N,ia as E,na as f,ob as T,pb as k,u as v,wa as l,wb as R,xa as t,ya as n,yb as F,za as h}from"./chunk-HTWSWMIO.js";var ee=["class","component"],te=()=>[10,20,30,50];function ne(a,o){a&1&&(t(0,"div",15),h(1,"app-loading-page"),n())}function ie(a,o){if(a&1&&(t(0,"div",16),h(1,"app-error-page",17),n()),a&2){let e=d();r(),l("errorData",e.errorData)}}function re(a,o){a&1&&(y(0),t(1,"p"),i(2,"Resolved"),n(),w())}function oe(a,o){if(a&1){let e=P();t(0,"button",22),u("click",function(){g(e);let c=d().$implicit,C=d(2);return m(C.resolveEnquiry(c))}),i(1,"Resolve"),n()}}function ae(a,o){if(a&1&&(t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),n(),t(7,"td"),i(8),n(),t(9,"td"),i(10),M(11,"date"),n(),t(12,"td"),i(13),n(),t(14,"td"),i(15),n(),t(16,"td"),i(17),M(18,"date"),n(),t(19,"td"),f(20,re,3,0,"ng-container",21)(21,oe,2,0,"ng-template",null,0,L),n()()),a&2){let e=o.$implicit,s=o.index,c=q(22);r(2),p(s+1),r(2),p(e.name),r(2),p(e.email),r(2),p(e.phone),r(2),p(e.resolvedDate?O(11,10,e.resolvedDate):"-"),r(3),p(e.subject),r(2),p(e.message),r(2),p(O(18,12,e.createdDate)),r(3),l("ngIf",e.isResolved)("ngIfElse",c)}}function se(a,o){if(a&1&&(t(0,"div",18)(1,"table",19)(2,"thead")(3,"tr")(4,"th"),i(5,"Sl.No"),n(),t(6,"th"),i(7,"Name"),n(),t(8,"th"),i(9,"Email"),n(),t(10,"th"),i(11,"Phone Number"),n(),t(12,"th"),i(13,"Resolved Date"),n(),t(14,"th"),i(15,"Subject"),n(),t(16,"th"),i(17,"Message"),n(),t(18,"th"),i(19,"Enquiry Date"),n(),t(20,"th"),i(21,"Status"),n()()(),t(22,"tbody"),f(23,ae,23,14,"tr",20),n()()()),a&2){let e=d();r(23),l("ngForOf",e.enquiries)}}function le(a,o){if(a&1&&(t(0,"option",28),i(1),n()),a&2){let e=o.$implicit;l("value",e),r(),p(e)}}function ce(a,o){if(a&1){let e=P();t(0,"div",23)(1,"div",24)(2,"label"),i(3,"Items per page:"),n(),t(4,"select",25),u("change",function(c){g(e);let C=d();return m(C.onPageSizeChange(c))}),f(5,le,2,2,"option",26),n(),t(6,"span"),i(7),n(),t(8,"button",27),u("click",function(){g(e);let c=d();return m(c.goToFirstPage())}),i(9,"\xAB"),n(),t(10,"button",27),u("click",function(){g(e);let c=d();return m(c.goToPreviousPage())}),i(11,"\u2039"),n(),t(12,"button",27),u("click",function(){g(e);let c=d();return m(c.goToNextPage())}),i(13,"\u203A"),n(),t(14,"button",27),u("click",function(){g(e);let c=d();return m(c.goToLastPage())}),i(15,"\xBB"),n()()()}if(a&2){let e=d();r(4),l("value",e.pageSize),r(),l("ngForOf",D(9,te)),r(2),I("",e.pageNumber*e.pageSize+1," - ",e.getEndItemIndex()," of ",e.totalRecords),r(),l("disabled",e.pageNumber===0),r(2),l("disabled",e.pageNumber===0),r(2),l("disabled",e.pageNumber+1>=e.totalPages),r(2),l("disabled",e.pageNumber+1>=e.totalPages)}}var x=class a{constructor(o,e,s,c){this._enquiriesService=o;this._authService=e;this._router=s;this._cdr=c}paginatorForm=new S({pageNumber:new b(0),pageSize:new b(10)});filterForm=new S({searchString:new b(null)});isLoading=!1;isLoadingData=!0;isError=!1;errorData;totalRecords=0;enquiries=[];ngOnInit(){this.getEnquiriesData(),this.paginatorForm.valueChanges.pipe(v(500)).subscribe(o=>{this.isLoadingData=!0,this.getEnquiriesData()}),this.filterForm.valueChanges.pipe(v(500)).subscribe(o=>{this.isLoadingData=!0,this.getEnquiriesData()})}get pageNumber(){return this.paginatorForm.get("pageNumber")?.value??0}get pageSize(){return this.paginatorForm.get("pageSize")?.value??10}get totalPages(){return Math.ceil(this.totalRecords/this.pageSize)}getEndItemIndex(){let o=(this.pageNumber+1)*this.pageSize;return o>this.totalRecords?this.totalRecords:o}goToFirstPage(){this.paginatorForm.patchValue({pageNumber:0})}goToPreviousPage(){this.pageNumber>0&&this.paginatorForm.patchValue({pageNumber:this.pageNumber-1})}goToNextPage(){this.pageNumber+1<this.totalPages&&this.paginatorForm.patchValue({pageNumber:this.pageNumber+1})}goToLastPage(){this.paginatorForm.patchValue({pageNumber:this.totalPages-1})}onPageSizeChange(o){let e=parseInt(o.target.value,10);this.paginatorForm.patchValue({pageSize:e,pageNumber:0})}getEnquiriesData(){let o={pageIndex:this.pageNumber,pageSize:this.pageSize,searchString:this.filterForm.value.searchString||""};this.isError=!1,this.errorData=null,this.isLoadingData=!0,this._enquiriesService.apiAdminEnquiriesGetEnquiriesPost(o).subscribe({next:e=>{this.isLoadingData=!1,e.statusCode===200&&e.data?(this.enquiries=e.data,this.totalRecords=e.totalRecords??0,this._cdr.detectChanges()):(this.isError=!0,this.errorData={imgSrc:"empty-box.png",errorTitleMessage:"No Data available",errorSubTitleMessage:"Please try to add Applicants!"}),this._cdr.detectChanges()},error:e=>{this.isLoadingData=!1,this.enquiries=[],navigator.onLine?e.status===401?this._authService.logout():this.setGenericError():this.errorData={imgSrc:"no-signal.png",errorTitleMessage:"Internet connection lost",errorSubTitleMessage:"Please check your connection."},this.isError=!0,this._cdr.detectChanges()}})}setGenericError(){this.errorData={imgSrc:"error.png",errorTitleMessage:"Something went wrong",errorSubTitleMessage:"Please try again later"}}resetToSearch(){this.filterForm.controls.searchString.reset()}resolveEnquiry(o){this._enquiriesService.apiAdminEnquiriesResolveEnquiryGet(o.id).subscribe({next:()=>{this.getEnquiriesData()},error:()=>{console.error("Failed to resolve enquiry")}})}static \u0275fac=function(e){return new(e||a)(_(X),_(W),_(z),_(N))};static \u0275cmp=E({type:a,selectors:[["app-list",8,"component"]],attrs:ee,decls:22,vars:5,consts:[["notResolved",""],[1,"enquiries-container"],[1,"header"],[1,"header-left"],[1,"page-title"],[1,"breadcrumb"],["routerLink","/admin/dashboard"],[1,"separator"],[1,"header-right",3,"formGroup"],["type","text","placeholder","Search...","formControlName","searchString",1,"search-input"],["routerLink","/admin/jobs/add",1,"add-button"],["class","loading-page-ui",4,"ngIf"],["class","error-page-ui",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","paginator-wrapper",4,"ngIf"],[1,"loading-page-ui"],[1,"error-page-ui"],[3,"errorData"],[1,"table-wrapper"],[1,"enquiry-table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"resolve-button",3,"click"],[1,"paginator-wrapper"],[1,"pagination-controls"],[3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"click","disabled"],[3,"value"]],template:function(e,s){e&1&&(t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2"),i(5,"Enquiries"),n()(),t(6,"div",5)(7,"span")(8,"a",6),i(9,"Home"),n()(),t(10,"span",7),i(11,"/"),n(),t(12,"span"),i(13,"Enquiries"),n()()(),t(14,"form",8),h(15,"input",9),t(16,"button",10),i(17,"Add"),n()()(),f(18,ne,2,0,"div",11)(19,ie,2,1,"div",12)(20,se,24,1,"div",13)(21,ce,16,10,"div",14),n()),e&2&&(r(14),l("formGroup",s.filterForm),r(4),l("ngIf",s.isLoadingData),r(),l("ngIf",s.isError&&!s.isLoadingData),r(),l("ngIf",!s.isLoadingData&&!s.isError),r(),l("ngIf",s.totalRecords>s.pageSize))},dependencies:[F,T,k,R,A,V,Z,Y,K,H,U,J,G,j,B,Q,$],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f5f5f5}.enquiries-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:2rem;background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 12px #ff020214;box-sizing:border-box}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:#222}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{font-size:.95rem;color:#777}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 6px;color:#999}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-top:1rem}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{height:38px;padding:0 12px;border-radius:6px;border:1px solid #ccc;font-size:.95rem;width:220px;transition:all .2s ease}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff33}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{height:38px;padding:0 20px;border-radius:6px;border:none;background-color:#0056d2;color:#fff;font-size:.95rem;cursor:pointer;transition:background-color .2s ease}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover{background-color:#0041a8}.table-wrapper[_ngcontent-%COMP%]{margin-top:2rem;overflow-x:auto}.enquiry-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.95rem;min-width:900px}.enquiry-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .enquiry-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border:1px solid #ddd}.enquiry-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f4f4f4;font-weight:600;color:#333}.enquiry-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fafafa}.enquiry-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f7ff}.enquiry-table[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;font-size:.85rem;cursor:pointer;transition:background-color .2s ease}.enquiry-table[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.enquiry-table[_ngcontent-%COMP%]   .resolve-button[_ngcontent-%COMP%]{width:60px;height:24px;background-color:#007bff;border:none;border-radius:4px;color:#fff}.paginator-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:1rem 0}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:1rem;font-size:.95rem;background-color:#f9f9f9;border:1px solid #ddd;padding:8px 12px;border-radius:8px;box-shadow:0 2px 6px #0000000d}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#333}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px 10px;border-radius:6px;border:1px solid #ccc;font-size:.95rem;min-width:60px;background-color:#fff;cursor:pointer;transition:border-color .2s}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;min-width:120px;text-align:center;color:#444}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;border-radius:6px;border:1px solid #ccc;background-color:#fff;font-weight:700;font-size:.9rem;color:#007bff;cursor:pointer;transition:all .2s}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#007bff;color:#fff;border-color:#007bff}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;color:#aaa;border-color:#ccc}"]})};var Ee=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:x}];export{Ee as EnquiriesRoutes};
